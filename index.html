<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>PBX</title>
		
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
		<link href="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet"/>
		<link rel="stylesheet" href="styles.css">

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/js/bootstrap-editable.min.js"></script>
		<script src="vendor/handlebars-v1.3.0.js"></script>
		<script src="vendor/taffy-min.js"></script>

		<script src="handlebars-helpers.js"></script>
		<script src="pbx.js"></script>

		<script id="t_menu" type="text/x-handlebars-template">
			<div class="list-group">
				<a class="list-group-item {{#is active 'users'}}active{{/is}}" onclick="set_main('users')">
					Users
					<span class="badge">{{users}}</span>
				</a>
				<a class="list-group-item {{#is active 'lines'}}active{{/is}}" onclick="set_main('lines')">
					Lines
					<span class="badge">{{lines}}</span>
				</a>
				<a class="list-group-item {{#is active 'groups'}}active{{/is}}" onclick="set_main('groups')">
					Hunt Groups
					<span class="badge">{{groups}}</span>
				</a>
			</div>

			<div class="list-group">
				<a class="list-group-item {{#is active 'settings'}}active{{/is}}" onclick="set_main('settings')">
					Settings
				</a>
			</div>
		</script>

		<script id="t_users" type="text/x-handlebars-template">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<a class="btn btn-default pull-right" onclick="add_user()">Add User</a>
					<h1 class="panel-title">Configure Users</h1>
				</div>
				<div class="panel-body">
					Blah blah spiel
				</div>

				<table class="table">
        <thead>
          <tr>
            <th>CallerID</th>
            <th>Name</th>
            <th>Email</th>
						<th></th>
          </tr>
        </thead>
        <tbody>
					{{#each users}}
          <tr>
						<td><a href="#" data-e="y" data-type="text" data-id="{{id}}" data-col="caller_id">{{caller_id}}</a></td>
						<td><a href="#" data-e="y" data-type="text" data-id="{{id}}" data-col="name">{{name}}</a></td>
						<td><a href="#" data-e="y" data-type="text" data-id="{{id}}" data-col="email">{{email}}</a></td>
						<td>
							<button type="button" class="close" aria-hidden="true" onclick="delete_user('{{id}}')">
								&times;
							</button>
						</td>
          </tr>
					{{/each}}
        </tbody>
      	</table>
			</div>
		</script>

		<script id="t_lines" type="text/x-handlebars-template">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<a class="btn btn-default pull-right" onclick="add_line()">Add Line</a>
					<a class="btn btn-default pull-right mright" onclick="auto_lines()">Auto Add Lines</a>
					<h3 class="panel-title">Configure Lines</h3>
				</div>
				<div class="panel-body">
					Lines and stuff
				</div>

				<table class="table">
        <thead>
          <tr>
            <th>Ext #</th>
            <th>User</th>
            <th>Voicemail</th>
						<th>Show CallerID</th>
						<th></th>
          </tr>
        </thead>
        <tbody>
					{{#each lines}}
          <tr>
						<td><a data-e="y" data-type="text" data-id="{{id}}" data-col="ext">{{ext}}</a></td>
						<td><a data-e="y" data-type="select" data-value="{{user_id}}" data-id="{{id}}" data-col="user_id" data-source="{{names}}">{{user_name user_id}}</a></td>
						<td>
							<a onclick="toggle_value('lines','{{id}}','voicemail')">
								{{#is voicemail}}
									<span class="glyphicon glyphicon-check"></span>
								{{else}}
									<span class="glyphicon glyphicon-unchecked"></span>
								{{/is}}
							</a>
						</td>
						<td>
							<a onclick="toggle_value('lines','{{id}}','show_callerid')">
								{{#is show_callerid}}
									<span class="glyphicon glyphicon-check"></span>
								{{else}}
									<span class="glyphicon glyphicon-unchecked"></span>
								{{/is}}
							</a>
						</td>
						<td>
							<button type="button" class="close" aria-hidden="true" onclick="delete_line('{{id}}')">
								&times;
							</button>
						</td>
          </tr>
					{{/each}}
        </tbody>
      	</table>
			</div>
		</script>

		<script id="t_groups" type="text/x-handlebars-template">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<a class="btn btn-default pull-right" onclick="add_group()">Add Hunt Group</a>
					<h3 class="panel-title">Configure Hunt Groups</h3>
				</div>
				<div class="panel-body">
					<p>Blah blah spiel probably explain what a Hunt Group is...</p>

					{{#each groups}}
					<div class="panel panel-default">
						<div class="panel-heading">
							<button type="button" class="close" aria-hidden="true" onclick="delete_group('{{id}}')">
								&times;
							</button>
							<h3 class="panel-title">Hunt Group {{id}}</h3>
						</div>
						<div class="panel-body">
							<div class="col-md-6">
								<h4>Lines</h4>
								<p>
								{{#each lines}}
									<div class="col-md-9">
										{{line_info line_id}}
									</div>
									<div class="col-md-1">
										<button type="button" class="close" aria-hidden="true" onclick="delete_line_in_group({{@index}}, '{{../id}}')">
											&times;
										</button>
									</div>
									<div class="clearfix"></div>
								{{/each}}
								</p>
								<select class="form-control input-sm hunt_select hunt_{{id}}">
									<option value="">-- Select Line</option>
									{{#each ../lines}}
										<option value="{{id}}">{{user_name user_id}}</option>
									{{/each}}
								</select>
								<div class="btn btn-default btn-sm" onclick="add_line_to_group('{{id}}')">Add Line</div>
							</div>
							<div class="col-md-4">
								<h4>Call Distribution Strategy</h4>
								<a onclick="toggle_value('groups','{{id}}','ring_all')">
									{{#is ring_all}}
										<span class="glyphicon glyphicon-check"></span>
									{{else}}
										<span class="glyphicon glyphicon-unchecked"></span>
									{{/is}}
								</a>
								Ring All
								<a onclick="toggle_value('groups','{{id}}','ring_all')">
								{{#is ring_all}}
									<span class="glyphicon glyphicon-unchecked"></span>
								{{else}}
									<span class="glyphicon glyphicon-check"></span>
								{{/is}}
								</a>
								Rotate
							</div>
						</div>
					</div>
					{{/each}}

				</div>

			</div>
		</script>

		<script id="t_settings" type="text/x-handlebars-template">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<h3 class="panel-title">Auto Attendant</h3>
				</div>
				<div class="panel-body">
					Blah stuff to configure
				</div>
			</div>

			<div class="panel panel-danger">
				<div class="panel-heading">
					<h3 class="panel-title">Danger Zone</h3>
				</div>
				<div class="panel-body">
					<a class="btn btn-danger" onclick="reset()">Delete All The Things</a>
				</div>
			</div>
		</script>

	</head>

	<body>
		<div class="container">

			<nav class="navbar navbar-default" role="navigation">
				<div class="container-fluid">
					<div class="navbar-header">
						<a class="navbar-brand">PBX-O-TRON</a>
					</div>
					<p class="navbar-text navbar-right">Signed in as <a class="navbar-link">Anonymous</a></p>
				</div>
			</nav>

			<div class="row">

				<div id="menu" class="col-md-3">
					<!-- templates and shit -->
				</div>
				
				<div id="main" class="col-md-9">
					<!-- template shit here -->
				</div>

			</div>

		</div>
	</body>
</html>
